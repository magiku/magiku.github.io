<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>交换路由基础命令</title>
      <link href="/2023/10/19/%E4%BA%A4%E6%8D%A2%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/10/19/%E4%BA%A4%E6%8D%A2%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="结合一个实验介绍交换与路由配置命令"><a href="#结合一个实验介绍交换与路由配置命令" class="headerlink" title="结合一个实验介绍交换与路由配置命令"></a>结合一个实验介绍交换与路由配置命令</h1><h2 id="交换部分——Vlan、DHCP、STP"><a href="#交换部分——Vlan、DHCP、STP" class="headerlink" title="交换部分——Vlan、DHCP、STP"></a>交换部分——Vlan、DHCP、STP</h2><p>每台电脑代表一个部门，其中pc1划分为vlan10. pc2、pc3、pc4则依次为vlan20、vlan30、vlan40。并开启DHCP服务，DNS设置为3.0.0.1</p><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/3dfc86b922ade3a582cc5.png"></p><p>二层交换机直接互连，因此需开启STP，并将三层交换机设置为根。</p><p>下面命令，第一次都全拼且有注释，后续全为缩写</p><p>二层交换LSW2配置如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">system-view  //进入系统视图</span><br><span class="line">sysname sw2 //修改交换机名字</span><br><span class="line"></span><br><span class="line">vlan batch 10 20 30 40 //批量增设vlan10 vlan20 vlan30 vlan40</span><br><span class="line"></span><br><span class="line">interface Ethernet0/0/1 //进入1接口的视图</span><br><span class="line">port link-type access //配置为access模式</span><br><span class="line">port default vlan 10 //配置接口的VLAN</span><br><span class="line"></span><br><span class="line">int e0/0/2</span><br><span class="line">p l a</span><br><span class="line">p d v 20</span><br><span class="line"></span><br><span class="line">interface Ethernet0/0/3</span><br><span class="line">port link-type trunk //配置为trunk模式</span><br><span class="line">port trunk allow-pass vlan 10 20 30 40 //配置接口放行的VLAN</span><br><span class="line"></span><br><span class="line">int e0/0/4</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 30 40</span><br></pre></td></tr></table></figure><p>二层交换LSW3配置如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys sw3</span><br><span class="line"></span><br><span class="line">vlan batch 10 20 30 40</span><br><span class="line">interface Ethernet0/0/3</span><br><span class="line">port link-type access</span><br><span class="line">port default vlan 30</span><br><span class="line">int e0/0/4</span><br><span class="line">p l a</span><br><span class="line">p d v 40</span><br><span class="line">interface Ethernet0/0/1</span><br><span class="line">port link-type trunk</span><br><span class="line">port trunk allow-pass vlan 10 20 30 40</span><br><span class="line">int e0/0/2</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 30 40</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>三层交换机LSW1配置如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys sw1</span><br><span class="line"></span><br><span class="line">dhcp enable // 开启DHCP功能</span><br><span class="line">vlan batch 10 20 30 40</span><br><span class="line">interface GigabitEthernet0/0/1</span><br><span class="line">port link-type trunk</span><br><span class="line">port trunk allow-pass vlan 10 20 30 40</span><br><span class="line">int g0/0/3</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 30 40</span><br><span class="line"></span><br><span class="line">interface Vlanif10 //虚拟一个vlan10接口（需已创建vlan10）</span><br><span class="line">ip address 192.168.10.254 255.255.255.0 //为该虚拟接口配置ip地址</span><br><span class="line">dhcp select interface //在该接口上开启DHCP</span><br><span class="line">dhcp server dns-list 3.0.0.1 //在该接口DHCP上设定DNS服务地址</span><br><span class="line">int vlanif20</span><br><span class="line">ip add 192.168.20.254 24</span><br><span class="line">dhcp sel int</span><br><span class="line">dhcp server dns 3.0.0.1</span><br><span class="line">int vlanif30</span><br><span class="line">ip add 192.168.30.254 24</span><br><span class="line">dhcp sel int</span><br><span class="line">dhcp server dns 3.0.0.1</span><br><span class="line">int vlanif40</span><br><span class="line">ip add 192.168.40.254 24</span><br><span class="line">dhcp sel int</span><br><span class="line">dhcp server dns 3.0.0.1</span><br><span class="line"></span><br><span class="line">stp root primary //设置该交换机为STP的根服务器</span><br></pre></td></tr></table></figure><blockquote><p>注：下游电脑获取到DHCP授权的ip地址的前提是交换机开起了DHCP功能，并在接口上启用DHCP，同时设置了VlanIf的ip地址，并且链路是放行了vlan。</p></blockquote><table><thead><tr><th>基础命令</th><th>说明与用例</th></tr></thead><tbody><tr><td>vlan *</td><td>创建vlan</td></tr><tr><td>vlan batch * *</td><td>同时创建多个vlan</td></tr><tr><td></td><td>用例：vlan batch 20 40              ||           vlan bath 20 to 40 (配置vlan20到vlan40)</td></tr><tr><td></td><td></td></tr><tr><td>interface Ethernet</td><td>进入接口模式（百兆口）</td></tr><tr><td>port link-type access</td><td>接口类型配置为access</td></tr><tr><td>port default vlan *</td><td>为接口配置vlan</td></tr><tr><td></td><td>用例：port default vlan 10</td></tr><tr><td></td><td></td></tr><tr><td>interface GigabitEthernet</td><td>进入接口模式（千兆口）</td></tr><tr><td>port link-type trunk</td><td>接口类型配置为trunk</td></tr><tr><td>port trunk pvid vlan *</td><td>接口配置pvid ——打上的vlan标签</td></tr><tr><td>port trunk allow-pass vlan *</td><td>接口放行对应的vlan通过</td></tr><tr><td></td><td>用例：port trunk allow-pass vlan 10 20</td></tr><tr><td></td><td></td></tr><tr><td>interface Vlanif *</td><td>对已创建的vlan，创建一个vlanif接口，作为改vlan的网关</td></tr><tr><td></td><td>用例：int vlan 10</td></tr><tr><td>ip address *</td><td>为vlanif接口添加ip地址——其下vlan设备的网关地址</td></tr><tr><td></td><td>用例：ip address 192.168.1.254 24</td></tr></tbody></table><h2 id="路由部分——动态路由ospf、静态路由、NAT"><a href="#路由部分——动态路由ospf、静态路由、NAT" class="headerlink" title="路由部分——动态路由ospf、静态路由、NAT"></a>路由部分——动态路由ospf、静态路由、NAT</h2><h3 id="在上文的拓扑基础上，增加一个出口路由器"><a href="#在上文的拓扑基础上，增加一个出口路由器" class="headerlink" title="在上文的拓扑基础上，增加一个出口路由器"></a>在上文的拓扑基础上，增加一个出口路由器</h3><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/35e07912014e9a52d29ad.png"></p><p>首先需要配置LSW1，增加到AR1的链路信息与配置ospf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vlan 12</span><br><span class="line">interface GigabitEthernet0/0/2</span><br><span class="line"> port link-type access</span><br><span class="line"> port default vlan 12</span><br><span class="line">interface Vlanif12</span><br><span class="line"> ip address 192.168.12.2 255.255.255.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 开启ospf，并设定router-id为2.2.2.2</span><br><span class="line">// 开启area0</span><br><span class="line">// 宣告设备所连接的网段信息</span><br><span class="line">ospf 1 router-id 2.2.2.2</span><br><span class="line"> area 0.0.0.0</span><br><span class="line">  network 192.168.12.2 0.0.0.0</span><br><span class="line">  network 192.168.10.254 0.0.0.0</span><br><span class="line">  network 192.168.20.254 0.0.0.0</span><br><span class="line">  network 192.168.30.254 0.0.0.0</span><br><span class="line">  network 192.168.40.254 0.0.0.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>配置AR1路由器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys r1</span><br><span class="line">int s4/0/0</span><br><span class="line">ip add 192.168.12.1 24</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ospf 1 router-id 1.1.1.1</span><br><span class="line"> area 0</span><br><span class="line">  network 192.168.12.1 0.0.0.0 </span><br><span class="line"></span><br><span class="line">//设置静态缺省路由，让未配置的网段路由统一走下一跳到12.0.0.2（假定该ip地址为AR1路由器所连接的公网路由器ip）</span><br><span class="line">ip route-static 0.0.0.0 0.0.0.0 12.0.0.2</span><br><span class="line">//将该静态缺省路由通过ospf宣告给ospf下的其他三层设备</span><br><span class="line">ospf 1</span><br><span class="line"> default-route-advertise</span><br></pre></td></tr></table></figure><p>假设在AR1路由器的右侧连接了运营商的公网路由器，其ip地址为12.0.0.2，运营商分配的公网ip为12.0.0.1</p><p>设置NAT出口策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//创建一条acl策略，规则为全放行</span><br><span class="line">acl 2000</span><br><span class="line">rule 1 permit</span><br><span class="line">进入连接了公网路由器的1口，配置nat出口策略（使用2000号的acl规则）</span><br><span class="line">int g0/0/1</span><br><span class="line">nat outbound 2000</span><br></pre></td></tr></table></figure><h3 id="再增设3个路由器与2台服务器，对应公网的情况。"><a href="#再增设3个路由器与2台服务器，对应公网的情况。" class="headerlink" title="再增设3个路由器与2台服务器，对应公网的情况。"></a>再增设3个路由器与2台服务器，对应公网的情况。</h3><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/33a1c959a0ffb75afe917.png"></p><p>AR2通过串口线与AR1连接，也就是12.0.0.2ip的公网路由器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys R2</span><br><span class="line">int s4/0/0</span><br><span class="line">  ip add 12.0.0.2 24</span><br><span class="line">int g0/0/0</span><br><span class="line">  ip add 23.0.0.2 24</span><br><span class="line">int g0/0/1</span><br><span class="line">  ip add 24.0.0.2 24</span><br><span class="line"></span><br><span class="line">ospf 1 router-id 2.2.2.2 </span><br><span class="line">area 0</span><br><span class="line">  network 12.0.0.2 0.0.0.0 </span><br><span class="line">  network 23.0.0.2 0.0.0.0 </span><br><span class="line">  network 24.0.0.2 0.0.0.0 </span><br></pre></td></tr></table></figure><p>AR3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys R3</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 23.0.0.3 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 34.0.0.3 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 3.0.0.254 24</span><br><span class="line"></span><br><span class="line">ospf 1 router-id 3.3.3.3</span><br><span class="line">a 0</span><br><span class="line">net 23.0.0.3 0.0.0.0</span><br><span class="line">net 34.0.0.3 0.0.0.0</span><br><span class="line">net 3.0.0.254 0.0.0.0</span><br></pre></td></tr></table></figure><p>AR4</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys R4</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 24.0.0.4 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 34.0.0.4 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 4.0.0.254 24</span><br><span class="line"></span><br><span class="line">ospf 1 router-id 4.4.4.4</span><br><span class="line">a 0</span><br><span class="line">net 24.0.0.4 0.0.0.0</span><br><span class="line">net 34.0.0.3 0.0.0.0</span><br><span class="line">net 4.0.0.254 0.0.0.0</span><br></pre></td></tr></table></figure><p>为dns服务器配置3.0.0.1地址，http服务器配置4.0.0.1地址</p><p>则私网的pc都可以连通到公网的这两个服务</p><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/d66b35aea5af074f68b92.png"></p><p><strong>注意：配置记得保存，以及模拟器会定期休眠。时间太久可能某一台路由器宕机了导致链路不通。</strong></p><h2 id="点对点协议认证"><a href="#点对点协议认证" class="headerlink" title="点对点协议认证"></a>点对点协议认证</h2><p>以上图为例，在右侧的AR2配置认证模式与账号密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//配置认证模式为chap</span><br><span class="line">interface Serial4/0/0</span><br><span class="line"> ppp authentication-mode chap </span><br><span class="line">q</span><br><span class="line"></span><br><span class="line">//创建用户，并将用户用于ppp协议</span><br><span class="line">aaa</span><br><span class="line"> local-user magiku password cipher magiku030</span><br><span class="line"> local-user magiku service-type ppp</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VRP命令 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【科普】计算机网络概述</title>
      <link href="/2023/10/19/%E3%80%90%E7%A7%91%E6%99%AE%E3%80%91%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/"/>
      <url>/2023/10/19/%E3%80%90%E7%A7%91%E6%99%AE%E3%80%91%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="网络概述"><a href="#网络概述" class="headerlink" title="网络概述"></a>网络概述</h1><p>本文以实际出发，不从基本概念、发展历史、技术原理细致介绍，我始终认为，工科类课程应该以实践为主。理论是为实践而服务的，理论准不准确不是很重要。</p><p>前两章主要是简单介绍一些概念，第三章开始从实际出发，讲解数据如何传输的。</p><blockquote><p>叠甲：本文以字数量少为前提来科普整个网络方面的知识、因此会有很多地方不严谨。</p><p>本文的目的是为各位阅读几百页的教材书或者看几十集的网络课程时有一个基础的概念与体系，方便入门深入学习。</p><p>如果要以实践为主体的，推荐之后去按hcia的课程进行学习。</p><p>如果想深层次理解原理的，可以去看看黑皮书根TCP&#x2F;IP相关的书籍。</p></blockquote><h3 id="从大家最熟悉的家庭网络开始介绍"><a href="#从大家最熟悉的家庭网络开始介绍" class="headerlink" title="从大家最熟悉的家庭网络开始介绍"></a>从大家最熟悉的家庭网络开始介绍</h3><p>一个家庭的网络从无到有，会经历这个过程</p><blockquote><p>找运营商购买宽带套餐</p><p>运营商派宽带师傅上门安装</p><p>宽带师傅从户外通信电箱拉光纤到房间</p><p>拿出光猫接上光纤，配置光猫</p><p>家庭有无线路由器的，再通过网线连上光猫</p><p>设置号无线路由器的配置后</p><p>手机连上WiFi就可以上网，电脑通过网线连接无线路由器也可以上网了。</p></blockquote><p>如果家中设备比较多，那么可以在无线路由器下再连接一个小型交换机</p><p>最终就是这样样子</p><p>简单用文字介绍，那就是 运营商提供的链路——光猫——路由器——交换机——网络设备</p><p>接下来就简单介绍这些设备在网络中起到什么作用</p><h4 id="光猫、或者说“猫”"><a href="#光猫、或者说“猫”" class="headerlink" title="光猫、或者说“猫”"></a>光猫、或者说“猫”</h4><p>这个设备的作用就是信号转换。比如将光纤中的光信号与网线中的电信号作互相转换。</p><p>这个设备英文名叫Modem，是 modulator（调制器）和 demodulator（解调器）的合成，就是“调制解调器”。</p><p>但早期大伙都音译叫做猫，于是”猫“这个叫法就这么一直流传下来了。</p><p>目前“猫”这个词代指的设备很宽泛，不再单指调制解调器。</p><p>现在运营商提供的光猫都带调制解调器功能与路由器功能，甚至有的加上了无线WiFi的功能。</p><h4 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h4><p>连接不同网络的“网关”，可以类比作不同国家之间的海关。</p><p>一般来说，一个网络中只配置一台路由器。</p><p>路由器主要负责”路由“功能，也就是给网络数据的传播做一个导航指路的作用</p><h4 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h4><p>一般交换机就是用来连接多台网络设备，使设备连接在一起。</p><p>同时可以理解为，交换机就是一个插排，路由器&#x2F;其他交换机传过来的“电”只有一个”插座口”。</p><p>交换机这个”插排“接上后，网络设备就都可以接上”电“了</p><blockquote><p>以上都是以基础小白的概念以及家庭网络层面来介绍的，后续以公司网络架构为基础介绍数据包过程就会更为具体准确的讲解了</p><p>简单来说，数据包就是通过电脑主机形成、通过链路到达交换机、再用交换机转发到路由器、路由器再一路转发到目标电脑所在的局域网路由器、经过交换机到达目标电脑，由目标电脑解析数据包的内容。</p></blockquote><blockquote><p>在正式的网络中，就是一台路由器加数台交换机。</p><p>如果是规模比较大，一般会考虑一个链路冗余、双机备份，避免某处线缆破损或者设备损坏导致大片设备无法上网。</p><p>这里贴一个网络拓扑图可以看看</p></blockquote><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/c18e9158b6b651bb8f787.png"></p><h3 id="网络信息"><a href="#网络信息" class="headerlink" title="网络信息"></a>网络信息</h3><p>本章介绍网络通信时所需要的信息，平时会折腾一下电脑或手机网络可能都会看到这些</p><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/8f46c168c9517825dc3ec.png" alt="电脑"></p><p>其中我们需要注意的 MAC地址（物理地址）、IP地址（一般指IPv4地址）、网关、DHCP、DNS。</p><blockquote><p>MAC地址是网卡的身份证，IP地址为门牌号，网关为小区门卫、DHCP是随机摇号机制、DNS是业主住址薄。</p></blockquote><p>图中网关DHCP服务器DNS服务器为同一个，是因为我用的电脑连接手机的热点。DNS为网关，也就是使用网关的网络信息的DNS服务器。</p><h4 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h4><p>端口这个说法不够具体，物理接口也可以叫端口，比如交换机端口，墙面端口等等</p><p>这里要介绍的是抽象概念上的端口，在计算机中，其范围从0~65535，</p><p>你电脑上运行了很多联网的程序，他们都在使用网络资源。</p><p>你所需要的qq信息，网页，歌曲总是互不干扰的准确传递到你电脑上对应的qq、浏览器、音乐播放器上。</p><p>实现这种程序上的一对一通信，就是端口的作用。</p><p>比喻起来的话，就是你与很多qq好友同时在线聊天，因为是在聊天列表有不同的独立窗口，所以消息不会发错人，你也不会收错对方发给其他人的消息。</p><h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><p>协议就是规则、规范，或者说一种语言。</p><p>因为计算机网络中传播的数据只有0和1，就需要协议来定义出各种编码解码方式（类似摩斯密码）以及定义各种得到的参数代表什么含义。</p><p>计算机通信中存在着许多的协议，这里按五层模型来展示的话，一共有这么多协议。</p><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/33c5aa445129f81e48ab8.png" alt="图源华为"></p><p>目前只需要知道有协议这个概念就行，以后会具体一个个协议的学习</p><h4 id="OSI七层模型与TCP五层模型"><a href="#OSI七层模型与TCP五层模型" class="headerlink" title="OSI七层模型与TCP五层模型"></a>OSI七层模型与TCP五层模型</h4><p>七层模型是ISO组织于1984年发布的细化的网络层级，更多的作用是让你理解网络通信这个抽象的东西，同时让厂商基于这个层级去标准化规范化的设置与遵循协议。</p><p>故障排查时也可以安装七层模型来逐级排查。</p><p>而五层模型（有的会在把最下两层合并构成四层模型）可以说是对七层模型的简化。将最上的5、6、7层简化为一层。</p><p>具体内容感兴趣可自行查阅资料，目前五层模型更被广泛接受。</p><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/0dcd11e0b854a68df0ad9.png"></p><p>目前只需要知道二层是基于mac地址进行数据传输，三层是基于ip地址传输。</p><p>因此在电脑之间的网络传播都是处于前3层上的。</p><p>路由器都是三层设备，而交换机会有二层交换机与三层交换机之分，一般个人接触到交换机都是二层交换机。</p><blockquote><p>介绍以上信息都是为了接下来介绍的数据包的传输做基础。</p></blockquote><h3 id="数据包的传输过程"><a href="#数据包的传输过程" class="headerlink" title="数据包的传输过程"></a>数据包的传输过程</h3><h4 id="数据包是什么"><a href="#数据包是什么" class="headerlink" title="数据包是什么"></a>数据包是什么</h4><p>我们都知道计算机的底层是由0和1构成的，我们看到的图片、音频、视频在计算机底层都是一串串数字。</p><p>网络通信时传输的就是这些字符串。</p><p>在实际传输时，会把这些字符串拆解打包，封装。成为一个个数据包，有些地方会叫做报文（严格来讲，有包、段、帧的区分）。</p><p>一个、或者说一串数据包的接口可以简化为</p><p>【目标地址】【源地址】【协议】【数据内容】【校验码】</p><blockquote><p>具体百度搜索一下数据报文结构。</p></blockquote><p>类比一下</p><table><thead><tr><th>**目标地址             **</th><th><strong>数据包要送达的目的地</strong></th><th><strong>快递的收件人</strong></th></tr></thead><tbody><tr><td>**源地址      **</td><td><strong>数据包的发送来源</strong></td><td><strong>快递的寄件人</strong></td></tr><tr><td><strong>协议</strong></td><td><strong>该数据包遵循什么协议、使用什么协议解读</strong></td><td><strong>走哪一家物流公司的渠道</strong></td></tr><tr><td>**数据内容           **</td><td><strong>真正要传输的数据</strong></td><td><strong>快递包裹内的东西</strong></td></tr><tr><td>**检验码        **</td><td><strong>通过固定的算法计算出的数据内容的值，如果后续设备收到数据包后计算的出的值与检验码不同，则说明该数据包损坏了，于是会丢弃该数据包</strong></td><td><strong>快递的包装、如果包装破损、物品缺失、会拒收</strong></td></tr></tbody></table><h4 id="公司拓扑"><a href="#公司拓扑" class="headerlink" title="公司拓扑"></a>公司拓扑</h4><p>在讲数据包的传输过程前，我们讲一讲公司的网络结构。先不考虑双击热备的冗余，一般公司的架构会是这样。</p><blockquote><p>左侧表示公司，右侧为互联网。</p></blockquote><p><img src="https://c4893f9d.telegraph-image-713.pages.dev/file/9b2236fa669a83163dcd0.png"></p><p>拓扑图是这样的，图中每带电脑实际表示一整个办公区&#x2F;部门。</p><p>在实际中，交换机都是在楼层的机房中，电脑是通过网线连接在工位附近的面板模块（就是“插座”），面板内的网线一路走到机房的跳线架上，再从跳线架使用一截网线连接交换机。（个别小公司会省去跳线架，面板的线直接接入交换机）</p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络 </tag>
            
            <tag> 科普 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
